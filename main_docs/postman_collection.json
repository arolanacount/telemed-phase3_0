{
  "info": {
    "name": "Telehealth API (local)",
    "_postman_id": "telehealth-local-collection",
    "description": "To be updated as the API is developed. Postman collection for Telehealth API (dev). Replace {{authToken}} with a valid JWT (e.g., TEST_AUTH).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000"
    },
    {
      "key": "authToken",
      "value": "{{TEST_AUTH}}"
    }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Sign up",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" }
            ],
            "body": { "mode": "raw", "raw": "{ \"email\": \"dev@example.com\", \"password\": \"Test1234!\" }" },
            "url": { "raw": "{{baseUrl}}/api/auth/signup", "host": ["{{baseUrl}}"], "path": ["api","auth","signup"] }
          }
        }
      ]
    },
    {
      "name": "Patients",
      "item": [
        {
          "name": "List Patients",
          "request": {
            "method": "GET",
            "header": [ { "key": "Authorization", "value": "Bearer {{authToken}}" } ],
            "url": { "raw": "{{baseUrl}}/api/patients", "host": ["{{baseUrl}}"], "path": ["api","patients"] }
          }
        },
        {
          "name": "Create Patient",
          "request": {
            "method": "POST",
            "header": [ { "key": "Authorization", "value": "Bearer {{authToken}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{ \"name\": \"Test Patient\" }" },
            "url": { "raw": "{{baseUrl}}/api/patients", "host": ["{{baseUrl}}"], "path": ["api","patients"] }
          }
        }
      ]
    },
    {
      "name": "Visits",
      "item": [
        {
          "name": "Create Visit",
          "request": {
            "method": "POST",
            "header": [ { "key": "Authorization", "value": "Bearer {{authToken}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{ \"patient_id\": \"patient-123\" }" },
            "url": { "raw": "{{baseUrl}}/api/visits", "host": ["{{baseUrl}}"], "path": ["api","visits"] }
          }
        },
        {
          "name": "Add Note",
          "request": {
            "method": "POST",
            "header": [ { "key": "Authorization", "value": "Bearer {{authToken}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{ \"body\": \"Exam findings...\" }" },
            "url": { "raw": "{{baseUrl}}/api/visits/{id}/note", "host": ["{{baseUrl}}"], "path": ["api","visits","{id}","note"], "variable": [ { "key": "id", "value": "visit-123" } ] }
          }
        }
      ]
    },
    {
      "name": "Upload",
      "item": [
        {
          "name": "Get Signed URL",
          "request": {
            "method": "POST",
            "header": [ { "key": "Authorization", "value": "Bearer {{authToken}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{ \"fileName\": \"sample.wav\" }" },
            "url": { "raw": "{{baseUrl}}/api/upload", "host": ["{{baseUrl}}"], "path": ["api","upload"] }
          }
        }
      ]
    },
    {
      "name": "Transcription",
      "item": [
        {
          "name": "Transcribe",
          "request": {
            "method": "POST",
            "header": [ { "key": "Authorization", "value": "Bearer {{authToken}}" }, { "key": "Content-Type", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{ \"audioPath\": \"clinician/1/sample.wav\", \"visitId\": \"visit-123\" }" },
            "url": { "raw": "{{baseUrl}}/api/transcribe", "host": ["{{baseUrl}}"], "path": ["api","transcribe"] }
          }
        }
      ]
    },
    {
      "name": "Video",
      "item": [
        {
          "name": "Get Twilio Token",
          "request": {
            "method": "GET",
            "header": [ { "key": "Authorization", "value": "Bearer {{authToken}}" } ],
            "url": { "raw": "{{baseUrl}}/api/twilio/token?room=test", "host": ["{{baseUrl}}"], "path": ["api","twilio","token"], "query": [ { "key": "room", "value": "test" } ] }
          }
        }
      ]
    }
  ]
}
